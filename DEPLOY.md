# Инструкция по развертыванию на Amvera

Этот документ описывает процесс развертывания данного Next.js проекта на платформе Amvera.

## 1. Конфигурационный файл

Для корректной сборки и запуска проекта в корне должен находиться файл `amvera.yml` следующего содержания:

```yaml
meta:
  environment: node
  toolchain:
    name: npm
    version: 20

install:
  - npm install

build:
  - npm run build

run:
  command: npm run start
  containerPort: 80
```

Этот файл сообщает Amvera, что необходимо использовать окружение Node.js, установить зависимости через `npm`, выполнить сборку командой `npm run build` и запустить приложение через `npm run start` на порту 80.

## 2. Процесс развертывания

Развертывание осуществляется путем отправки кода в Git-репозиторий Amvera.

### Шаг 1: Подключение удаленного репозитория Amvera

Если вы разворачиваете проект впервые, необходимо добавить удаленный репозиторий Amvera в ваш локальный Git-проект. Это делается один раз.

```bash
git remote add amvera https://git.amvera.ru/maxmaxmaximusfree/profgas
```

### Шаг 2: Отправка изменений для деплоя

Каждая отправка изменений в `master` (или `main`) ветку удаленного репозитория `amvera` инициирует автоматическую сборку и развертывание проекта.

```bash
# Добавляем все изменения
git add .

# Создаем коммит
git commit -m "Описание изменений для деплоя"

# Отправляем код в Amvera
git push amvera master
```

Если ваша основная ветка называется `main`, используйте команду:
```bash
git push amvera main:master
```

## 3. Важные замечания

*   **Логи:** Логи сборки и логи работающего приложения доступны в соответствующих вкладках в панели управления Amvera. Это первое место, куда нужно смотреть в случае ошибок.
*   **Файловая система:** Приложение запускается в контейнере, где папка с кодом (`/app`) является временной. Для хранения постоянных данных (например, если бы использовалась база данных SQLite или загружались файлы) необходимо использовать папку `/data`, которая является постоянным хранилищем.
